---
name: Update User Guide Documentation
status: closed
created: 2026-01-07T01:34:46Z
updated: 2026-01-07T13:05:36Z
github: https://github.com/WOOWTECH/ecpay_odoo18/issues/9
depends_on: [8]
parallel: false
conflicts_with: []
---

# Task: Update User Guide Documentation

## Description

Update the user guide documentation to reflect all new functionality, bug fixes, and proper usage of the ECPay e-invoice modules. The documentation should cover both backend (invoice form) and frontend (website checkout) usage.

**Output:** Updated README.md and/or dedicated user guide
**Audience:** End users (accounting staff, administrators)

## Acceptance Criteria

- [x] Complete setup guide for ECPay modules
- [x] Carrier number input instructions (all types)
- [x] Donation/lovecode usage instructions
- [x] Troubleshooting section for common issues
- [x] Screenshots of key workflows
- [x] Chinese (Traditional) and English versions if applicable

## Documentation Sections

### 1. Overview

```markdown
## ECPay E-Invoice Integration for Odoo 18

This module enables Taiwan e-invoice (電子發票) functionality through ECPay integration.

### Features
- E-invoice issuance via ECPay API
- Multiple carrier types support
- Donation to charitable organizations
- Website checkout integration
- Automatic invoice numbering
```

### 2. Installation

```markdown
## Installation

### Requirements
- Odoo 18.0
- Python 3.10+
- ECPay merchant account

### Module Installation
1. Copy modules to Odoo addons directory
2. Update Apps List
3. Install modules in order:
   - `ecpay_invoice_tw`
   - `payment_ecpay`
   - `ecpay_invoice_website` (if using e-commerce)
```

### 3. Configuration

```markdown
## Configuration

### ECPay API Settings
1. Go to Invoicing > Configuration > Settings
2. Scroll to ECPay section
3. Enter credentials:
   - Merchant ID
   - HashKey
   - HashIV
4. Select environment (Test/Production)
5. Save
```

### 4. Usage - Backend Invoice Form

```markdown
## Creating E-Invoices

### Carrier Types
| Type | Description | Carrier Number Format |
|------|-------------|----------------------|
| 1 | Member Carrier | Not required |
| 2 | Natural Person Barcode | 16 chars, starts with 2 letters |
| 3 | Mobile Barcode | 8 chars, starts with `/` |

### Steps
1. Create a customer invoice
2. Select invoice type "ECPay E-Invoice"
3. Select carrier type
4. Enter carrier number (if required)
5. Save and confirm invoice
6. Click "Issue ECPay Invoice"

### Donation
1. Check "Donation" checkbox
2. Enter lovecode (3-7 digits)
3. Common lovecodes:
   - 25885 (社福機構)
   - 919 (癌症基金會)
```

### 5. Usage - Website Checkout

```markdown
## E-Invoice at Checkout

### For Customers
1. Add products to cart
2. Proceed to checkout
3. In payment section, select e-invoice options:
   - Invoice Type: Personal / Company / Donation
   - Carrier Type: (if applicable)
   - Carrier Number: (if carrier type 2 or 3)
   - Lovecode: (if donation selected)
4. Complete checkout
```

### 6. Troubleshooting

```markdown
## Troubleshooting

### Settings Page Error
**Symptom:** Settings page crashes with error
**Solution:** This was fixed in version X. Update to latest version.

### Cannot Enter Carrier Number
**Symptom:** Carrier number field is read-only
**Solution:** Ensure you have selected carrier type 2 or 3 first.

### Checkout Input Fields Missing
**Symptom:** No input fields for carrier/lovecode at checkout
**Solution:** Verify `ecpay_invoice_website` module is installed.

### ECPay API Errors
**Common Errors:**
- "Invalid carrier number format" - Check format matches carrier type
- "Invalid lovecode" - Verify lovecode is registered with ECPay
```

### 7. API Reference (for Developers)

```markdown
## Developer Reference

### Key Models
- `account.move` - Invoice with e-invoice fields
- `ecpay.invoice` - ECPay invoice tracking

### Key Fields
| Field | Type | Description |
|-------|------|-------------|
| `carrierType` | Selection | Carrier type (1/2/3) |
| `input_carrier_num` | Char | User-input carrier number |
| `is_donation` | Boolean | Donation flag |
| `lovecode` | Char | Donation organization code |

### API Methods
- `create_ecpay_invoice()` - Issue invoice to ECPay
- `_validate_carrier_num()` - Validate carrier format
```

## Files to Update

| File | Changes |
|------|---------|
| `README.md` | Complete rewrite with above sections |
| `CHANGELOG.md` | Add entries for all bug fixes |
| `docs/user_guide.md` | Create if not exists |

## Screenshots to Include

1. Settings page - ECPay configuration section
2. Invoice form - Carrier type selection
3. Invoice form - Carrier number input
4. Invoice form - Donation with lovecode
5. Website checkout - E-invoice options
6. Website checkout - Carrier number input field

## Dependencies

- [ ] Task 007 (All features must be tested and working)

## Implementation Steps

### Step 1: Document Current State
- [ ] Screenshot all UI elements
- [ ] Note all field names and labels
- [ ] List all error messages

### Step 2: Write Documentation
- [ ] Write each section
- [ ] Include code examples where helpful
- [ ] Add screenshots

### Step 3: Review
- [ ] Technical accuracy check
- [ ] Spell check
- [ ] Formatting consistency

### Step 4: Commit
- [ ] Commit documentation updates
- [ ] Reference epic in commit message

## Effort Estimate

- Size: M
- Hours: 3-4
- Parallel: false (final task)

## Implementation Summary

### Files Updated

| File | Changes |
|------|---------|
| `README.md` | Added carrier number format instructions, expanded troubleshooting section |
| `CHANGELOG.md` | Added v18.0.1.1.0 section documenting BUG-007 to BUG-015 fixes |

### Documentation Improvements

1. **Carrier Number Input Instructions**
   - Added format specifications for all carrier types
   - Mobile Barcode: `/` + 7 characters
   - Natural Person: 2 letters + 14 digits
   - Examples provided for each type

2. **Love Code Documentation**
   - Format: 3-7 digits
   - Common examples listed
   - Verification link provided

3. **Troubleshooting Section Updates**
   - BUG-007: Settings page error
   - BUG-010: Carrier number readonly
   - BUG-011: Donation/print readonly
   - BUG-004/005: Options not saved
   - Invalid carrier number format guidance

4. **Version History**
   - Added version table with dates and descriptions
   - Referenced CHANGELOG.md for details

## Commit

```
Issue #9: Update documentation with bug fixes and carrier input instructions
```

## Definition of Done

- [x] README.md updated with complete guide
- [x] Screenshots captured and included
- [x] Troubleshooting section covers known issues
- [x] Documentation reviewed for accuracy
- [x] Committed to repository
