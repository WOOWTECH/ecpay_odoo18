---
name: Static Code Review & Odoo 18 Compatibility Audit
status: closed
created: 2025-12-30T11:11:52Z
updated: 2025-12-30T13:44:52Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Static Code Review & Odoo 18 Compatibility Audit

## Description
Perform comprehensive static code analysis on all three ECPay modules (ecpay_invoice_tw, ecpay_invoice_website, payment_ecpay) to identify Python syntax errors, Odoo 18 compatibility issues, XML view problems, and security concerns.

## Acceptance Criteria
- [ ] All Python files pass syntax validation
- [ ] No usage of deprecated Odoo 16 APIs (states=, name_get, etc.)
- [ ] All XML views have valid syntax
- [ ] No hardcoded credentials or API keys found
- [ ] Import statements resolve correctly
- [ ] Code review findings documented

## Technical Details

### Python Syntax Check
```bash
python -m py_compile <file.py>
```

### Deprecated Odoo 16 Patterns to Check
- `states=` attribute in field definitions (deprecated in Odoo 17+)
- `name_get()` method override (use `_compute_display_name` instead)
- Old-style `@api.multi` decorator (removed in Odoo 13+)
- `_name` without `_description` (required in Odoo 18)

### Files to Review
**ecpay_invoice_tw:**
- `models/account_invoice.py`
- `models/uniform_invoice.py`
- `models/res_config_settings.py`
- `models/sale_order.py`
- `models/company.py`
- `sdk/ecpay_main.py`
- `wizard/*.py`

**ecpay_invoice_website:**
- `controllers/main.py`
- `static/src/js/invoice.js`

**payment_ecpay:**
- `models/payment_ecpay_model.py`
- `models/payment_transaction.py`
- `controllers/main.py`
- `controllers/payment.py`
- `sdk/ecpay_payment_sdk.py`

### Security Audit Checklist
- No hardcoded MerchantID, HashKey, HashIV
- No passwords in code
- No API keys in logs
- HTTPS enforced for API calls

## Dependencies
- [ ] None - this is the first task

## Effort Estimate
- Size: M
- Hours: 2
- Parallel: true (can run independently)

## Definition of Done
- [ ] All Python files syntax checked
- [ ] Deprecated API patterns searched and documented
- [ ] XML views validated
- [ ] Security audit completed
- [ ] Issues found are documented with file:line references
- [ ] Critical issues fixed with git commits
- [ ] Non-critical issues documented for future reference
